embedder:
  # dobry kompromis PL/EN; alternatywa: thenlper/gte-multilingual-base
  id: thenlper/gte-multilingual-base
  device: auto
  normalize_embeddings: true
  batch_size: 64
  max_seq_length: 512
  use_prefixes: true
  query_prefix: "query: "
  passage_prefix: "passage: "

reranker:
  # wielojęzyczny reranker; jeśli chcesz lżej → jinaai/jina-reranker-v2-small
  id: jinaai/jina-reranker-v2-base-multilingual
  device: auto
  batch_size: 16
  max_length: 512

llm:
  provider: huggingface
  id: Qwen/Qwen2.5-7B-Instruct
  device_map: auto
  dtype: bfloat16
  load_in_4bit: true
  bnb_4bit_quant_type: nf4
  bnb_4bit_use_double_quant: true
  generation:
    temperature: 0.2
    max_new_tokens: 500
    do_sample: false
    top_p: 0.9
    repetition_penalty: 1.1

vector_store:
  provider: qdrant
  url: ${QDRANT_URL:-http://localhost:6333}
  api_key: ${QDRANT_API_KEY:-}
  collection: ${QDRANT_COLLECTION:-ragx_documents}

  hnsw:
    m: 32
    ef_construct: 256
    on_disk: true
  quantization:
    type: scalar
    scalar:
      type: int8
      always_ram: false
      quantile: 0.99
      ignore: false
  search_params:
    ef: 128

retrieval:
  top_k_retrieve: 80
  rerank_top_m: 50
  context_top_n: 6
  chunk_size: 512
  chunk_overlap: 96

  dedupe:
    enabled: true
    similarity_threshold: 0.95

  hybrid_search:
    enabled: false          # Can enable BM25+vector later
    alpha: 0.5

chunking:
  strategy: semantic
  chunk_size: 512
  chunk_overlap: 96
  min_chunk_size: 100
  model_name_tokenizer: thenlper/gte-multilingual-base
  model_name_embedder: thenlper/gte-multilingual-base
  respect_sections: true
  breakpoint_percentile_thresh: 95
  add_passage_prefix: false
