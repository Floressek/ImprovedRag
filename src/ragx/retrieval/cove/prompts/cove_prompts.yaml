extract_claims:
  system: |
    Extract independent factual claims from the answer.
    Each claim must be verifiable against a knowledge base.
    CRITICAL: Extract claims in the SAME language as the answer!

  template: |
    Answer:
    {answer}

    Requirements:
    - Extract ONLY factual statements (no opinions, meta-statements, citations)
    - PRESERVE THE LANGUAGE: if answer is in Polish, claims MUST be in Polish
    - Each claim independent and verifiable
    - Max 20 words per claim
    - Skip anaphoric pronouns (he, she, it, this, that) - rephrase with explicit entities
    - Max {max_claims} claims

    Response (JSON only):
    {{
      "claims": ["claim1", "claim2"]
    }}

nli_verdict:
  system: |
    You are a natural language inference classifier.
    Determine if evidence supports, refutes, or is insufficient for the claim.

  template: |
    Claim:
    {claim}

    Evidence:
    {evidence}

    Task: Does the evidence support or refute the claim?

    Response (JSON only):
    {{
      "label": "supports" | "refutes" | "insufficient",
      "confidence": 0.0-1.0,
      "reasoning": "brief explanation (max 20 words)"
    }}

batch_nli_verdict:
  system: |
    You are a natural language inference classifier.
    Evaluate multiple claims against provided evidence.

  template: |
    Evidence:
    {evidence}

    Claims to evaluate ({num_claims} total):
    {claims_list}

    Task: For EACH claim (0 to {num_claims}), determine if the evidence above supports, refutes, or is insufficient.
    You MUST provide exactly {num_claims} results.

    Response (JSON only):
    {{
      "results": [
        {{"claim_id": 0, "label": "supports|refutes|insufficient", "confidence": 0.0-1.0, "reasoning": "brief explanation"}},
        {{"claim_id": 1, "label": "supports|refutes|insufficient", "confidence": 0.0-1.0, "reasoning": "brief explanation"}},
        ... (continue for all {num_claims} claims)
      ]
    }}

correct_answer:
  system: |
    Your goal is to correct the original answer by removing/fixing unverified claims using provided evidence so that the original question is answered correctly.
    DO NOT CHANGE THE STRUCTURE OF THE ORIGINAL ANSWER! HELP ANSWER THE ORIGINAL QUESTION!
  template: |
    ORIGINAL QUESTION!. THIS WE TRY TO ANSWER:
    {query}

    ORIGINAL ANSWER, THIS WE TRY TO CORRECT:
    {answer}
    
    ============================== CLAIMS ============================================
    Verified Claims (keep in the answer, without any additives like "**Verified Claims" or "**Citations"):
    {verified_claims}

    Failed Verifications (with evidence, delete or mark as potentially incorrect):
    {failed_verifications_with_evidence}

    Additional Retrieved Evidence (for citations):
    {additional_evidence}

    ============================= SOURCES =============================================
    Original Sources used for original answer:
    {original_contexts}

    Instructions:
    - Remove or correct claims marked as "refutes" or "insufficient"
    - Use evidence from failed verifications, additional evidence, OR original sources
    - Keep verified claims unchanged
    - Maintain language and structure of original answer
    - DO NOT ADD NEW INFORMATION beyond provided evidence nor answer any other questions aside from the original one

    Corrected Answer (with citations, WITHOUT any additives like  "**Corrected Answer", "**Citations", etc.):

targeted_queries:
  system: |
    Generate specific search queries to find missing evidence.
    CRICTICAL: Generate queries in the SAME language as the original question!

  template: |
    Original Question: {original_query}

    Claims Missing Evidence:
    {missing_claims}

    Task: Generate 1-5 specific search queries to find evidence for these claims.

    Requirements:
    - Each query targets ONE specific claim
    - Max 15 words per query
    - Focus on factual aspects
    - Same language as original query

    Response (JSON only):
    {{
      "queries": ["query1", "query2"]
    }}